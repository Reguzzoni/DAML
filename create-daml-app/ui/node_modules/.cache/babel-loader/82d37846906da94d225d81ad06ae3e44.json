{"ast":null,"code":"// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { encode } from 'jwt-simple';\nimport { ledgerId } from './config';\nexport const APPLICATION_ID = 'create-daml-app'; // NOTE: This is for testing purposes only.\n// To handle authentication properly,\n// see https://docs.daml.com/app-dev/authentication.html.\n\nexport const SECRET_KEY = 'secret';\n\nfunction computeToken(party) {\n  const payload = {\n    \"https://daml.com/ledger-api\": {\n      \"ledgerId\": ledgerId,\n      \"applicationId\": APPLICATION_ID,\n      \"actAs\": [party]\n    }\n  };\n  return encode(payload, SECRET_KEY, 'HS256');\n}\n\nexport const computeCredentials = party => {\n  const token = computeToken(party);\n  return {\n    party,\n    token,\n    ledgerId\n  };\n};","map":{"version":3,"sources":["D:/blockchain/DAML/create-daml-app/ui/src/Credentials.ts"],"names":["encode","ledgerId","APPLICATION_ID","SECRET_KEY","computeToken","party","payload","computeCredentials","token"],"mappings":"AAAA;AACA;AAEA,SAASA,MAAT,QAAuB,YAAvB;AACA,SAASC,QAAT,QAAyB,UAAzB;AAEA,OAAO,MAAMC,cAAsB,GAAG,iBAA/B,C,CAEP;AACA;AACA;;AACA,OAAO,MAAMC,UAAkB,GAAG,QAA3B;;AAQP,SAASC,YAAT,CAAsBC,KAAtB,EAA6C;AAC3C,QAAMC,OAAO,GAAG;AACd,mCAA+B;AAC7B,kBAAYL,QADiB;AAE7B,uBAAiBC,cAFY;AAG7B,eAAS,CAACG,KAAD;AAHoB;AADjB,GAAhB;AAOA,SAAOL,MAAM,CAACM,OAAD,EAAUH,UAAV,EAAsB,OAAtB,CAAb;AACD;;AAED,OAAO,MAAMI,kBAAkB,GAAIF,KAAD,IAAgC;AAChE,QAAMG,KAAK,GAAGJ,YAAY,CAACC,KAAD,CAA1B;AACA,SAAO;AAACA,IAAAA,KAAD;AAAQG,IAAAA,KAAR;AAAeP,IAAAA;AAAf,GAAP;AACD,CAHM","sourcesContent":["// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\r\n// SPDX-License-Identifier: Apache-2.0\r\n\r\nimport { encode } from 'jwt-simple';\r\nimport { ledgerId } from './config';\r\n\r\nexport const APPLICATION_ID: string = 'create-daml-app';\r\n\r\n// NOTE: This is for testing purposes only.\r\n// To handle authentication properly,\r\n// see https://docs.daml.com/app-dev/authentication.html.\r\nexport const SECRET_KEY: string = 'secret';\r\n\r\nexport type Credentials = {\r\n  party: string;\r\n  token: string;\r\n  ledgerId: string;\r\n}\r\n\r\nfunction computeToken(party: string): string {\r\n  const payload = {\r\n    \"https://daml.com/ledger-api\": {\r\n      \"ledgerId\": ledgerId,\r\n      \"applicationId\": APPLICATION_ID,\r\n      \"actAs\": [party]\r\n    }\r\n  };\r\n  return encode(payload, SECRET_KEY, 'HS256');\r\n}\r\n\r\nexport const computeCredentials = (party: string): Credentials => {\r\n  const token = computeToken(party);\r\n  return {party, token, ledgerId};\r\n}\r\n\r\nexport default Credentials;\r\n"]},"metadata":{},"sourceType":"module"}